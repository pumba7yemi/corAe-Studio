// corAe Returns & RMAâ„¢
enum ReturnStatus { REQUESTED AUTHORIZED RECEIVED REFUNDED REJECTED CLOSED }

model ReturnRequest {
  id          String       @id @default(cuid())
  companyId   String
  partyId     String
  invoiceId   String?
  reason      String?
  status      ReturnStatus @default(REQUESTED)
  createdAt   DateTime     @default(now())
  updatedAt   DateTime     @updatedAt

  company     CompanyIdentity @relation(fields: [companyId], references: [id], onDelete: Cascade)
  party       Party           @relation(fields: [partyId], references: [id], onDelete: Restrict)
  items       ReturnItem[]
}

model ReturnItem {
  id            String        @id @default(cuid())
  returnId      String
  skuId         String
  qty           Decimal       @db.Decimal(12,3)
  refundAmount  Decimal?      @db.Decimal(14,4)
  disposition   String?       // restock | scrap | repair

  return        ReturnRequest  @relation(fields: [returnId], references: [id], onDelete: Cascade)
  sku           Sku            @relation(fields: [skuId], references: [id], onDelete: Restrict)
}